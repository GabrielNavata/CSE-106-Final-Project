{% extends "base.html" %}
{% block title %}Browse{% endblock %}
{% block heading %}
    Browse
{% endblock %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Browse</title>
    <link rel="stylesheet" href="static/css/style.css">
  </head>
  <body>
    <h1>Browse</h1>
    <a href="{{ url_for('views.create') }}">Create Post</a>
	  
    <form action="{{ url_for('views.search') }}" method="POST">
      <label for="search">Search:</label>
      <input type="text" name="search" id="search" />
      <input type="submit" value="Search" />
    </form>

    <form id="filter-form" method="GET">
      <label for="filter">Filter by:</label>
      <select id="filter" name="filter">
        {% if sel%}
        <option value="views">Views</option>
        <option value="recent">Recent</option>
        {% else %}
        <option value="recent">Recent</option>
        <option value="views">Views</option>
        {% endif %}
      </select>
      <input type="submit" value="Submit">
    </form>
    
    {% if not posts %}
    <p>
      <strong>No results for "{{request.form["search"]}}" found</strong> {%
      endif %}
    </p>
    <ul>
      {% for post in posts %}
        <li>
          <h3><a href="{{ url_for('views.post', post_id=post.id) }}">{{ post.title }}</a></h3>
          <p>{{ post.content }}</p>
          <p>
          Posted by <a href="{{ url_for('views.profile', user_id = post.user.id ) }}">{{ post.user.username }}</a>
           on {{ post.formatted_timestamp() }}
          </p>
          <p>Category: {{post.category}}</p>
          <p>Views: {{post.views}}</p>
          {% if current_user == post.user %}
          <form method="POST" action="{{ url_for('views.delete_post', post_id=post.id) }}">
            <input type="submit" value="Delete">
          </form>
          {% endif %}
          
        </li>
      {% endfor %}
    </ul>
  

  </body>
</html>
{% endblock %}
